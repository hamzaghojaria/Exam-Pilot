<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>âœˆï¸ Exam-Pilot â€” Your AI Co-Pilot for Exams ğŸ“š</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <link rel="stylesheet" href="static/style.css" />
</head>

<body class="bg-gradient-to-r from-indigo-50 via-white to-pink-50 min-h-screen font-sans text-gray-800">
  <div id="page-content">
    <nav class="bg-white shadow-md mb-6">
      <div class="max-w-3xl mx-auto flex justify-between items-center p-4">
        <a href="/" class="text-xl font-bold text-indigo-600">âœˆï¸ Exam-Pilot</a>
        <div class="space-x-4">
          <a href="/login" class="text-gray-700 hover:text-indigo-600 font-medium">Login</a>
          <a href="/signup" class="text-gray-700 hover:text-indigo-600 font-medium">Signup</a>
          <a href="/profile" class="text-gray-700 hover:text-indigo-600 font-medium">Profile</a>
        </div>
      </div>
    </nav>

    <div class="max-w-3xl mx-auto py-10 px-6">
      <h1 class="text-3xl font-bold text-center mb-6">âœˆï¸ Exam-Pilot â€” Your AI Co-Pilot for Exams ğŸ“š</h1>

      <textarea id="content"
        class="w-full p-4 rounded-lg border border-gray-300 shadow-sm mb-4 focus:outline-none focus:ring-2 focus:ring-indigo-300"
        rows="6" placeholder="Paste your study content or topic here..."></textarea>

      <div class="mb-4 text-right text-sm text-gray-500">
        ğŸ§® Word Count: <span id="word-count-display">0 words</span>
      </div>

      <div class="mb-4">
        <label for="question-count" class="block text-sm font-medium text-gray-700 mb-1">How many questions?</label>
        <input type="number" id="question-count" value="2" min="1" max="20"
          class="w-full border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-indigo-300" />

      </div>
      <div class="mb-4">
        <label for="difficulty" class="block text-sm font-medium text-gray-700 mb-1">Difficulty Level</label>
        <select id="difficulty"
          class="w-full border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-indigo-300">
          <option value="Easy">ğŸŸ¢ Easy</option>
          <option value="Medium" selected>ğŸŸ¡ Medium</option>
          <option value="Hard">ğŸ”´ Hard</option>
          <option value="Extreme Hard">ğŸ’€ Extreme Hard</option>
        </select>
      </div>

      <div class="mb-4">
        <label for="subject" class="block text-sm font-medium text-gray-700 mb-1">Subject</label>
        <input type="text" id="subject" placeholder="e.g., Physics, History, General knowledge"
          class="w-full border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-indigo-300" />
      </div>


      <button id="generate-btn" onclick="generateQuiz()"
        class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-300">
        ğŸš€ Generate Test
      </button>

      <div id="quiz-section" class="mt-8 space-y-6"></div>
      <div id="result-section" class="mt-10"></div>
    </div>
  </div>
  <script>
    const loggedIn = "{{logged_in}}" === "true";

    if (!loggedIn) {
      // Blur background
      document.getElementById("page-content").classList.add("blur-sm", "pointer-events-none", "brightness-75");

      // Create alert
      let seconds = 5;
      const alertBox = document.createElement("div");
      alertBox.className = "fixed top-6 left-1/2 transform -translate-x-1/2 bg-red-600 text-white font-semibold px-6 py-4 rounded-xl shadow-xl z-50 text-center";
      alertBox.innerHTML = `ğŸ”’ You need to login first.<br/>Redirecting in <span id="countdown">5</span> seconds...`;
      document.body.appendChild(alertBox);

      const interval = setInterval(() => {
        seconds -= 1;
        document.getElementById("countdown").innerText = seconds;
        if (seconds <= 0) {
          clearInterval(interval);
          window.location.href = "/login";
        }
      }, 1000);
    }
  </script>

  <script src="static/script.js"></script>
</body>

</html>